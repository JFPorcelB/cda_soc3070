for (i in 1:q) {
qy1[y1>co[i] & y1<=co[i+1]] <- i
}
table_mob <- prop.table(table(qy0,qy1),margin = 2); table_mob
library("ineq")
library("tidyverse")
loss <- function(beta1,beta2) {
n=1000
lny0 <- rnorm(n,0,0.8)
#if ((beta1 + 2*max(lny0)*beta2)<=1 & (beta1 + 2*min(lny0)*beta2)>=0) {
#  lny1 <- lny0*beta1+ I(lny0^2)*beta2 + rnorm(n,0,0.85)
#
#}
#else {
#  lny1 <- lny0*beta1  + rnorm(n,0,0.85)
#}
lny1 <- lny0*beta1+ I(lny0^2)*beta2 + rnorm(n,0,1)
cor(lny0,lny1)
y0 = exp(lny0); Gini(y0)
y1 = exp(lny1); Gini(y1)
q=4
co <-quantile(y0,p=seq(0,1,by=1/q))
qy0 <- NULL
for (i in 1:q) {
qy0[y0>co[i] & y0<=co[i+1]] <- i
}
co <-quantile(y1,p=seq(0,1,by=1/q))
qy1 <- NULL
for (i in 1:q) {
qy1[y1>co[i] & y1<=co[i+1]] <- i
}
table_mob <- prop.table(table(qy0,qy1),margin = 2); table_mob
#chile
qq1 = 0.22
qqq = 0.395
q11 = 0.255
q1q = 0.235
#usa
qq1 = 0.16
qqq = 0.48
q11 = 0.42
q1q = 0.05
dev <- 1/((abs(table_mob[q,1]-qq1))/qq1 + (abs(table_mob[q,q]-qqq))/qqq +
(abs(table_mob[1,1]-q11))/q11 + (abs(table_mob[1,q]-q1q))/q1q)
return(loss = dev)
}
parameter_space <- expand.grid(iter = 1000, beta1 = seq(0,1,by=0.001), beta2 = seq(0,0,by=0.01)) |>
rowwise() |> mutate(loss = loss(beta1,beta2)) |> group_by(beta1,beta2) |> summarise(across(-iter,mean))
parameter_space |> as_tibble() |> mutate(w = loss/sum(loss), wmean_beta1 =  beta1*w, wmean_beta2 =  beta2*w) |>
summarise(across(everything(),sum))
parameter_space |> arrange(aesc(loss)) |> print(n=40)
parameter_space |> arrange(desc(loss)) |> print(n=40)
n=1000
lny0 <- rnorm(n,0,1.2)
lny1 <- 0.661*lny0  + 0.00*(lny0^2) + rnorm(n,0,0.85)
cor(lny0,lny1)
y0 = exp(lny0); Gini(y0)
y1 = exp(lny1); Gini(y1)
q=4
co <-quantile(y0,p=seq(0,1,by=1/q))
qy0 <- NULL
for (i in 1:q) {
qy0[y0>co[i] & y0<=co[i+1]] <- i
}
co <-quantile(y1,p=seq(0,1,by=1/q))
qy1 <- NULL
for (i in 1:q) {
qy1[y1>co[i] & y1<=co[i+1]] <- i
}
table_mob <- prop.table(table(qy0,qy1),margin = 2); table_mob
library("ineq")
library("tidyverse")
loss <- function(beta1,beta2) {
n=1000
lny0 <- rnorm(n,0,1.2)
#if ((beta1 + 2*max(lny0)*beta2)<=1 & (beta1 + 2*min(lny0)*beta2)>=0) {
#  lny1 <- lny0*beta1+ I(lny0^2)*beta2 + rnorm(n,0,0.85)
#
#}
#else {
#  lny1 <- lny0*beta1  + rnorm(n,0,0.85)
#}
lny1 <- lny0*beta1+ I(lny0^2)*beta2 + rnorm(n,0,0.85)
cor(lny0,lny1)
y0 = exp(lny0); Gini(y0)
y1 = exp(lny1); Gini(y1)
q=4
co <-quantile(y0,p=seq(0,1,by=1/q))
qy0 <- NULL
for (i in 1:q) {
qy0[y0>co[i] & y0<=co[i+1]] <- i
}
co <-quantile(y1,p=seq(0,1,by=1/q))
qy1 <- NULL
for (i in 1:q) {
qy1[y1>co[i] & y1<=co[i+1]] <- i
}
table_mob <- prop.table(table(qy0,qy1),margin = 2); table_mob
#chile
qq1 = 0.22
qqq = 0.395
q11 = 0.255
q1q = 0.235
#usa
#qq1 = 0.16
#qqq = 0.48
#q11 = 0.42
#q1q = 0.05
dev <- 1/((abs(table_mob[q,1]-qq1))/qq1 + (abs(table_mob[q,q]-qqq))/qqq +
(abs(table_mob[1,1]-q11))/q11 + (abs(table_mob[1,q]-q1q))/q1q)
return(loss = dev)
}
parameter_space <- expand.grid(iter = 1000, beta1 = seq(0.2,0.8,by=0.01), beta2 = seq(-0.2,0.2,by=0.01)) |>
rowwise() |> mutate(loss = loss(beta1,beta2)) |> group_by(beta1,beta2) |> summarise(across(-iter,mean))
parameter_space |> as_tibble() |> mutate(w = loss/sum(loss), wmean_beta1 =  beta1*w, wmean_beta2 =  beta2*w) |>
summarise(across(everything(),sum))
parameter_space |> arrange(desc(loss)) |> print(n=40)
0.2  + 0.2*max(lny0)*2
0.2  + 0.2*quantile(lny0,p=0.95)*2
0.22  + 0.13*quantile(lny0,p=0.95)*2
parameter_space |> as_tibble() |> mutate(w = loss/sum(loss), wmean_beta1 =  beta1*w, wmean_beta2 =  beta2*w) |>
summarise(across(everything(),sum))
0.437  + 0.0105*quantile(lny0,p=0.95)*2
path <- getURL("https://github.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/blob/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
library("RCurl")
path <- getURL("https://github.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/blob/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
library("readr")
library("readr")
path <- url("https://github.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/blob/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_csv(path)
data_anid
View(data_anid)
path <- url("https://github.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/blob/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_csv(path)
data_anid <- read_delim(path, delim = ";")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
path
data_anid <- read_delim(path, delim = ";")
data_anid <- read_delim(path, delim = ";")
library("readr")
read.csv(url("https://github.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/blob/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv"))
read.csv(url("https://github.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/blob/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv"))
path <- read.csv(url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv"))
path
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid
data_anid %>% glimpse()
data_anid  %>% group_by(SEXO,DISCIPLINA_DETALLE) %>%
summarise(across(`MONTO ADJUDICADO (MILES $)`,
list(numero_proyectos= ~ n(.x, na.rm = T), promedio_monto = ~ max(.x, na.rm = T) )
)
)
data_anid  %>% group_by(SEXO,DISCIPLINA_DETALLE)
data_anid  %>% group_by(SEXO,DISCIPLINA_DETALLE) %>%
summarise(across(`MONTO ADJUDICADO (MILES $)`,
list(numero_proyectos= ~ n(.x), promedio_monto = ~ mean(.x, na.rm = T) )
)
)
data_anid  %>% group_by(SEXO,DISCIPLINA_DETALLE) %>%
summarise(across(`MONTO ADJUDICADO (MILES $)`,
list(promedio_monto = ~ mean(.x, na.rm = T) )
)
)
data_anid  %>% group_by(SEXO,AREA_OCDE)
data_anid  %>% group_by(SEXO,AREA_OCDE) %>%
summarise(across(`MONTO ADJUDICADO (MILES $)`, list(promedio_monto = ~ mean(.x, na.rm = T))
)
)
data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`)
data_anid <- read_delim(path, delim = ";")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
subdata_anid <- data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(anno, sexo,area,duracion,monto)
subdata_anid
subdata_anid  %>% group_by(sexo,area) %>%
summarise(across(c(monto,duracion),mean))
)
subdata_anid  %>% group_by(sexo,area) %>%
summarise(across(c(monto,duracion),mean))
subdata_anid  %>% group_by(anno,sexo) %>%
summarise(across(c(monto,duracion), ~mean(.x,rm=T)))
subdata_anid  %>% group_by(anno,sexo) %>%
summarise(across(c(monto,duracion), ~mean(.x,rm=T))) %>%
mutate(monto_pormes = monto/duracion)
subdata_anid  %>% group_by(anno,sexo,area) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
library(readxl)
ipc <- read_excel("Desktop/ipc.xlsx", range = "A2:B10000")
View(ipc)
ipc <- read_excel("Desktop/ipc.xlsx", range = "A2:B10000")
ipc <- read_excel("Desktop/ipc.xlsx", range = "A2:B10000") %>% as_tibble()
ipc
ipc %>% mutate(year = as.Date(as.numeric(Periodo)))
ipc %>% mutate(year = as.Date(Periodo))
ipc %>% mutate(year = as.Date(Periodo), year= year(year))
ipc %>% mutate(year = as.Date(Periodo), anno= year(year))
librar("lubridate")
library("lubridate")
ipc %>% mutate(year = as.Date(Periodo), anno= year(year))
ipc %>% mutate(year = as.Date(Periodo), anno= year(year)) %>% group_by(anno) %>%
summarise(ipc = exp(mean(log(`1.IPC General`))))
ipc <- ipc %>% mutate(year = as.Date(Periodo), anno= year(year)) %>% group_by(anno) %>%
summarise(ipc = exp(mean(log(`1.IPC General`))))
write.csv("ipc.csv",ipc)
write.csv(ipc,"ipc.csv")
write.csv(ipc,"ipc.csv")
getwd()
ipc <- read_csv("Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
write.csv(ipc %>% select(anno,ipc),"/Users/Mauricio/Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc %>% select(anno,ipc)
write.csv(ipc %>% select(anno,ipc),"/Users/Mauricio/Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
write.csv(ipc %>% select(anno,ipc),"/Users/Mauricio/Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc <- ipc %>% select(anno,ipc) %>% mutate_all(as.numeric())
ipc <- ipc %>% select(anno,ipc) %>% mutate_all(.x,as.numeric())
ipc <- ipc %>% select(anno,ipc) %>% mutate_all(.,as.numeric())
ipc <- ipc %>% select(anno,ipc) %>% mutate_all(as.numeric)
ipc
write.csv(ipc %>% select(anno,ipc),"/Users/Mauricio/Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv")
ipc
library("tidyverse")
library("readr")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid <- data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(anno, sexo,area,duracion,monto)
data_anid
tabla_1 <- subdata_anid  %>% group_by(anno,sexo,area) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1 <- data_anid  %>% group_by(anno,sexo,area) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1
tabla_1 <- tabla_1 %>% left_join(ipc %>% select(anno,ipc), by="anno");
tabla_1
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc %>% mutate(ipc = ipc/3.700409)
ipc %>% mutate(ipc = ipc/3.700409) %>% View()
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc  %>% View()
ipc %>% mutate(ipc = ipc/3.015356) %>% View()
ipc %>% mutate(ipc = ipc/3.015356) %>% filter(anno<=2020)
write.csv(ipc,"/Users/Mauricio/Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc <-  ipc %>% mutate(ipc = ipc/3.015356) %>% filter(anno<=2020) %>% select(anno,ipc)
ipc
write.csv(ipc,"/Users/Mauricio/Desktop/ipc.csv")
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc %>% fill(ipc,.direction = "upp")
ipc %>% fill(ipc,.direction = "up")
ipc <- ipc %>% fill(ipc,.direction = "up")
tabla_1 <- tabla_1 %>% left_join(ipc %>% select(anno,ipc), by="anno");
tabla_1
library("tidyverse")
library("readr")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid <- data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(anno, sexo,area,duracion,monto)
data_anid
tabla_1 <- data_anid  %>% group_by(anno,sexo,area) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc <- ipc %>% fill(ipc,.direction = "up")
tabla_1 <- tabla_1 %>% left_join(ipc %>% select(anno,ipc), by="anno");
tabla_1
tabla_1 <- tabla_1 %>% mutate(monto_precios2021 = monto*ipc)
tabla_1
tabla_1 %>% select(anno,sexo,area,monto_precios2021)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_widet(-sexo, names_to="a", values_to="b")
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(-sexo, names_to="a", values_to="b")
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(sexo, names_to="a", values_to="b")
tabla_1 %>% select(anno,sexo,area,monto_precios2021)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,diff_hombremujer)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,diff_hombremujer)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer) %>%
privot_wider(names_from=anno,values_from=dif_hombremujer)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer) %>%
pivot_wider(names_from=anno,values_from=dif_hombremujer)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer) %>%
pivot_wider(names_from=area,values_from=dif_hombremujer)
```{r}
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer) %>%
pivot_wider(names_from=area,values_from=dif_hombremujer) %>% View()
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid <- data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(anno, sexo,area,duracion,monto)
tabla_1 <- data_anid  %>% group_by(anno,sexo,area) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1
library("tidyverse")
library("readr")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid <- data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(anno, sexo,area,duracion,monto)
tabla_1 <- data_anid  %>% group_by(area,sexo,anno) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc <- ipc %>% fill(ipc,.direction = "up")
ipc
tabla_1 <- tabla_1 %>% left_join(ipc %>% select(anno,ipc), by="anno");
tabla_1
tabla_1 <- tabla_1 %>% mutate(monto_precios2021 = monto*ipc)
tabla_1
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021)
library("tidyverse")
library("readr")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid <- data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(anno, sexo,area,duracion,monto)
library("tidyverse")
library("readr")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid <- data_anid %>% rename(anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(anno, sexo,area,duracion,monto)
data_anid
tabla_1 <- data_anid  %>% group_by(area,anno,sexo) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1
tabla_1 %>% complete(area,anno,sexo)
tabla_1
tabla_1 %>% complete(area,anno,sexo)
tabla_1 %>% complete(area,anno,sexo, fill = list(monto = 0))
ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv"); ipc
ipc <- ipc %>% fill(ipc,.direction = "up"); ipc
tabla_1 <- tabla_1 %>% left_join(ipc %>% select(anno,ipc), by="anno");
tabla_1
tabla_1 <- tabla_1 %>% mutate(monto_precios2021 = monto*ipc)
tabla_1
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
replace_na(list(HOMBRE = 0, MUJER = 0))
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
replace_na(list(HOMBRE = 0, MUJER = 0)) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
replace_na(list(HOMBRE = 0, MUJER = 0)) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer) %>%
pivot_wider(names_from=area,values_from=dif_hombremujer) %>% View()
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
path <- url("https://raw.githubusercontent.com/ANID-GITHUB/Historico-de-Proyectos-Adjudicados/da63cab4fa424eaaac2a108b0582c83fa4f229c1/BDH_Proyectos.csv")
data_anid <- read_delim(path, delim = ";")
data_anid
data_anid <- data_anid %>% rename(codigo_proyecto = CODIGO_PROYECTO, anno = ANO_FALLO, sexo = SEXO, area = AREA_OCDE, duracion =  DURACION_MESES, monto = `MONTO ADJUDICADO (MILES $)`) %>% select(codigo_proyecto,anno, sexo,area,duracion,monto)
data_anid
tabla_1 <- data_anid  %>% group_by(area,anno,sexo) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1
tabla_1 <- data_anid  %>% group_by(area,anno,sexo) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1
tabla_1 %>% head()
datos_ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv")
datos_ipc <- datos_ipc  %>% fill(ipc,.direction = "up")
datos_ipc %>% head()
datos_ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv")
datos_ipc <- datos_ipc  %>% fill(ipc,.direction = "up") %>% select(-X1)
datos_ipc %>% head()
tabla_1 <- tabla_1 %>% left_join(datos_ipc, by="anno")
tabla_1 %>% head()
tabla_1 <- data_anid  %>% group_by(area,anno,sexo) %>%
summarise(across(c(monto), ~mean(.x,rm=T)))
tabla_1 %>% head()
datos_ipc <- read_csv("/Users/Mauricio/Desktop/ipc.csv")
datos_ipc <- datos_ipc  %>% fill(ipc,.direction = "up") %>% select(-X1)
datos_ipc %>% head()
tabla_1 <- tabla_1 %>% left_join(datos_ipc, by="anno")
tabla_1 %>% head()
tabla_1 <- tabla_1 %>% mutate(monto_precios2021 = monto*ipc) %>% select(-c(monto,ipc))
tabla_1
tabla_1 %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021)
tabla_1 %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
replace_na(list(HOMBRE = 0, MUJER = 0))
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
replace_na(list(HOMBRE = 0, MUJER = 0)) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%select(anno,area,dif_hombremujer)
tabla_1 %>% select(anno,sexo,area,monto_precios2021) %>%
pivot_wider(names_from=sexo, values_from=monto_precios2021) %>%
replace_na(list(HOMBRE = 0, MUJER = 0)) %>%
mutate(dif_hombremujer = HOMBRE - MUJER) %>%  select(anno,area,dif_hombremujer) %>%
pivot_wider(names_from=area,values_from=dif_hombremujer)
clima_australia
file <- url("https://raw.githubusercontent.com/mebucca/dar_soc4001/master/slides/class_11/aus_weather.csv")
clima_australia <- read_csv(file)
clima_australia
file <- url("https://raw.githubusercontent.com/mebucca/dar_soc4001/master/slides/class_11/aus_weather.csv")
file <- url("https://raw.githubusercontent.com/mebucca/dar_soc4001/master/slides/class_11/aus_weather.csv")
clima_australia <- read_csv(file)
library("tidyverse")
file <- url("https://raw.githubusercontent.com/mebucca/dar_soc4001/master/slides/class_11/aus_weather.csv")
clima_australia <- read_csv(file)
clima_australia
clima_australia <- clima_australia %>%
mutate(fecha = make_datetime(Year, Month, Day))
library("lubridate")
clima_australia <- clima_australia %>%
mutate(fecha = make_datetime(Year, Month, Day))
clima_australia
clima_australia %>%
ggplot(aes(x=fecha,y=rainfall_mm)) +
geom_point(alpha=0.5, colour="red") +
geom_line(colour="blue")
clima_australia %>%
ggplot(aes(x=fecha,y=rainfall_mm)) +
geom_point(alpha=0.5, colour="red") +
geom_line(colour="blue", alpha=0.1)
clima_australia %>%
ggplot(aes(x=fecha,y=log(rainfall_mm))) +
geom_point(alpha=0.5, colour="red") +
geom_line(colour="blue", alpha=0.1)
clima_australia %>%
ggplot(aes(x=fecha,y=rainfall_mm)) +
geom_point(alpha=0.5, colour="red") +
geom_line(colour="blue", alpha=0.1)
clima_australia %>%
ggplot(aes(x=fecha,y=rainfall_mm)) +
geom_bar(colour="blue", alpha=0.1)
clima_australia %>%
ggplot(aes(x=fecha,y=rainfall_mm)) +
geom_line(colour="blue", alpha=0.1)
clima_australia %>%
ggplot(aes(x=fecha,y=rainfall_mm)) +
geom_line(colour="blue", alpha=0.7)
xaringan:::inf_mr()
xaringan:::inf_mr()
xaringan:::inf_mr()
xaringan:::inf_mr()
path <- "https://github.com/mebucca/cda_soc3070/blob/c70cb5446c6be2569ee20b682f729de0459bd2d4/homework/t_1/data_paper.csv"
read_csv(url(path))
library("tidyverse")
read_csv(url(path))
path <- "https://raw.githubusercontent.com/mebucca/cda_soc3070/master/homework/t_1/data_paper.csv"
read_csv(url(path))
load("nsca2018.Rda")
library(tibble)
load("nsca2018.Rda")
getwd()
url("https://github.com/mebucca/cda_soc3070/blob/master/ta/nsca2018.Rda") %>% load()
url("https://github.com/mebucca/cda_soc3070/blob/master/ta/nsca2018.Rda")
#Sintaxis
#Nueva base de datos
library(tibble)
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_categorical_data_analysis/repo/ta/")
load("nsca2018.Rda")
tibble(data1)
library(tidyverse)
library(car)
data1 <- data1 %>%
mutate(sexo_b = as.numeric(sexo))
data1 <- data1 %>%
mutate(museos_b = as.numeric(museos))
data1 <- data1 %>%
mutate(raza_b = as.numeric(raza))
#Codificación dummies (car)
data1$sexo_b <- recode(data1$sexo_b, "1=0; 2=1")
data1$museos_b <- recode(data1$museos_b, "1=1; 2=0")
data1$raza_b <- recode(data1$raza_b, "1=0; 2:26=1")
lmp1<- lm(museos_b ~ edad + sexo_b + raza_b, data=data1)
# summary(lmp1)
tibble(data1)
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_categorical_data_analysis/repo/ta/")
load("nsca2018.Rda")
tibble(data1)
load("/Users/Mauricio/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_categorical_data_analysis/repo/ta/nsca2018 (1).Rda")
library(tibble)
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/Teaching/ISUC/2021_2_categorical_data_analysis/repo/ta/")
load("nsca2018.Rda")
tibble(data1)
xaringan:::inf_mr()
